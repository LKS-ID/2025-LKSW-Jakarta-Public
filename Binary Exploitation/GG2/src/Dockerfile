FROM ubuntu:latest

RUN apt-get update 
RUN apt-get clean && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

RUN useradd -U -m -s /bin/sh med1

WORKDIR /home/med1

COPY ./chall .
COPY ./ynetd /usr/bin/ynetd

RUN chown root:med1 /usr/bin/ynetd
RUN chmod 750 /usr/bin/ynetd

RUN chmod -R 750 /home/med1
RUN echo "LKS{5fa42161375a258fb338febbc2a12599}" > ./flag.txt
RUN chmod 440 flag.txt
RUN chown -R root:med1 /home/med1

EXPOSE 11102

CMD ["/usr/bin/ynetd", "-u","med1", "-p", "11102", "/home/med1/chall"]
